CREATE TABLE TBL_ORDEM_SERVICO
(
    ID_ORDEM_SERVICO NUMBER GENERATED ALWAYS AS IDENTITY,
    ID_EQUIPAMENTO   NUMBER       NOT NULL,
    ID_CLIENTE       NUMBER       NOT NULL,
    DT_ENTRADA       TIMESTAMP(6) NOT NULL,
    DT_PREVISAO      TIMESTAMP(6),
    TX_DEFEITO       VARCHAR2(100) NOT NULL,
    NR_PRIORIDADE    NUMBER(1) NOT NULL,
    DT_SAIDA         TIMESTAMP(6),
    TX_STATUS        VARCHAR2(12) NOT NULL,
    CONSTRAINT ID_ORDEM_SERVICO PRIMARY KEY (ID_ORDEM_SERVICO),
    FOREIGN KEY (ID_EQUIPAMENTO) REFERENCES TBL_EQUIPAMENTO (ID_EQUIPAMENTO),
    FOREIGN KEY (ID_CLIENTE) REFERENCES TBL_CLIENTE (ID_CLIENTE)
);

INSERT INTO TBL_ORDEM_SERVICO(ID_EQUIPAMENTO,ID_CLIENTE,DT_ENTRADA,DT_PREVISAO,TX_DEFEITO,NR_PRIORIDADE,DT_SAIDA,TX_STATUS) VALUES (1,1,TO_DATE('03/07/2023 09:01:43','dd/mm/yyyy hh24:mi:ss'),NULL,'Computador não liga, após instalação de programa',0,TO_DATE('10/07/2023 14:13:09','dd/mm/yyyy hh24:mi:ss'),'CONCLUIDO');
INSERT INTO TBL_ORDEM_SERVICO(ID_EQUIPAMENTO,ID_CLIENTE,DT_ENTRADA,DT_PREVISAO,TX_DEFEITO,NR_PRIORIDADE,DT_SAIDA,TX_STATUS) VALUES (2,2,TO_DATE('15/07/2023 11:32:23','dd/mm/yyyy hh24:mi:ss'),NULL,'Troca de memória',2,NULL,'BLOQUEADO');

CREATE TABLE TBL_REL_OS_TECNICO
(
    ID_ORDEM_SERVICO NUMBER NOT NULL,
    ID_TECNICO       NUMBER NOT NULL,
    FOREIGN KEY (ID_ORDEM_SERVICO) REFERENCES TBL_ORDEM_SERVICO (ID_ORDEM_SERVICO),
    FOREIGN KEY (ID_TECNICO) REFERENCES TBL_TECNICO (ID_TECNICO)
);

INSERT INTO TBL_REL_OS_TECNICO(ID_ORDEM_SERVICO,ID_TECNICO) VALUES (1,1);
INSERT INTO TBL_REL_OS_TECNICO(ID_ORDEM_SERVICO,ID_TECNICO) VALUES (1,2);
INSERT INTO TBL_REL_OS_TECNICO(ID_ORDEM_SERVICO,ID_TECNICO) VALUES (2,1);

CREATE TABLE TBL_ITEM_SERVICO
(
    ID_ITEM_SERVICO  NUMBER GENERATED ALWAYS AS IDENTITY,
    ID_ORDEM_SERVICO NUMBER NOT NULL,
    ID_SERVICO       NUMBER NOT NULL,
    NR_VALOR         NUMBER(19,4) NOT NULL,
    CONSTRAINT ID_ITEM_SERVICO PRIMARY KEY (ID_ITEM_SERVICO),
    FOREIGN KEY (ID_ORDEM_SERVICO) REFERENCES TBL_ORDEM_SERVICO (ID_ORDEM_SERVICO),
    FOREIGN KEY (ID_SERVICO) REFERENCES TBL_SERVICO (ID_SERVICO)
);

INSERT INTO TBL_ITEM_SERVICO(ID_ORDEM_SERVICO,ID_SERVICO,NR_VALOR) VALUES (1,3,50.00);
INSERT INTO TBL_ITEM_SERVICO(ID_ORDEM_SERVICO,ID_SERVICO,NR_VALOR) VALUES (1,1,50.00);
INSERT INTO TBL_ITEM_SERVICO(ID_ORDEM_SERVICO,ID_SERVICO,NR_VALOR) VALUES (1,2,100.00);
INSERT INTO TBL_ITEM_SERVICO(ID_ORDEM_SERVICO,ID_SERVICO,NR_VALOR) VALUES (1,4,30.00);
INSERT INTO TBL_ITEM_SERVICO(ID_ORDEM_SERVICO,ID_SERVICO,NR_VALOR) VALUES (2,11,30.00);

CREATE TABLE TBL_OBSERVACAO
(
    ID_OBSERVACAO    NUMBER GENERATED ALWAYS AS IDENTITY,
    DT_OBSERVACAO    TIMESTAMP(6) NOT NULL,
    TX_OBSERVACAO    VARCHAR2(100) NOT NULL,
    ID_ORDEM_SERVICO NUMBER       NOT NULL,
    FOREIGN KEY (ID_ORDEM_SERVICO) REFERENCES TBL_ORDEM_SERVICO (ID_ORDEM_SERVICO)
);

INSERT INTO TBL_OBSERVACAO(DT_OBSERVACAO,TX_OBSERVACAO,ID_ORDEM_SERVICO) VALUES (TO_DATE('03/07/2023 13:11:12','dd/mm/yyyy hh24:mi:ss'),'Foi feita uma tentativa de iniciar em Modo de Segurança',1);
INSERT INTO TBL_OBSERVACAO(DT_OBSERVACAO,TX_OBSERVACAO,ID_ORDEM_SERVICO) VALUES (TO_DATE('15/07/2023 16:39:30','dd/mm/yyyy hh24:mi:ss'),'Orçamento de peças pendente de aprovação pelo cliente',2);